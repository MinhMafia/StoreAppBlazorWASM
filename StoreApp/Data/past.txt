asprotected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            // ✅ Explicit foreign key configuration
            modelBuilder.Entity<Product>(entity =>
            {
                entity.ToTable("Product");
                
                // Explicit column mapping
                entity.Property(e => e.Id).HasColumnName("id");
                entity.Property(e => e.BrandId).HasColumnName("brand_id");
                entity.Property(e => e.CategoryLv1Id).HasColumnName("category_lv1_id");
                entity.Property(e => e.Model).HasColumnName("model");
                entity.Property(e => e.Cpu).HasColumnName("cpu");
                entity.Property(e => e.Gpu).HasColumnName("gpu");
                entity.Property(e => e.RamGb).HasColumnName("ram_gb");
                entity.Property(e => e.Storage).HasColumnName("storage");
                entity.Property(e => e.ScreenSizeIn).HasColumnName("screen_size_in");
                entity.Property(e => e.Resolution).HasColumnName("resolution");
                entity.Property(e => e.WeightKg).HasColumnName("weight_kg");
                entity.Property(e => e.Os).HasColumnName("os");
                entity.Property(e => e.ReleaseDate).HasColumnName("release_date");
                entity.Property(e => e.PriceUsd).HasColumnName("price_usd");
                entity.Property(e => e.Source).HasColumnName("source");
                entity.Property(e => e.ImageUrl).HasColumnName("image_url");
                entity.Property(e => e.RawJson).HasColumnName("raw_json");

                // ✅ Explicit foreign key relationships
                entity.HasOne(p => p.Brand)
                      .WithMany(b => b.Products)
                      .HasForeignKey(p => p.BrandId)
                      .HasConstraintName("product_ibfk_1")
                      .OnDelete(DeleteBehavior.SetNull);

                entity.HasOne(p => p.CategoryLv1)
                      .WithMany(c => c.Products)
                      .HasForeignKey(p => p.CategoryLv1Id)
                      .HasConstraintName("product_ibfk_2")
                      .OnDelete(DeleteBehavior.SetNull);

                // Reviews relationship
                entity.HasMany(p => p.Reviews)
                      .WithOne(r => r.Product)
                      .HasForeignKey(r => r.ProductId)
                      .OnDelete(DeleteBehavior.Cascade);
            });

            // Brand configuration
            modelBuilder.Entity<Brand>(entity =>
            {
                entity.ToTable("Brand");
                entity.Property(e => e.Id).HasColumnName("id");
                entity.Property(e => e.Name).HasColumnName("name");
            });

            // Review configuration
            modelBuilder.Entity<Review>(entity =>
            {
                entity.ToTable("Review");
                entity.Property(e => e.Id).HasColumnName("id");
                entity.Property(e => e.UserId).HasColumnName("user_id");
                entity.Property(e => e.ProductId).HasColumnName("product_id");
                entity.Property(e => e.Rating).HasColumnName("rating");
                entity.Property(e => e.Comment).HasColumnName("comment");
                entity.Property(e => e.CreatedAt).HasColumnName("created_at");

                entity.HasOne(r => r.User)
                      .WithMany(u => u.Reviews)
                      .HasForeignKey(r => r.UserId)
                      .OnDelete(DeleteBehavior.Cascade);

                entity.HasOne(r => r.Product)
                      .WithMany(p => p.Reviews)
                      .HasForeignKey(r => r.ProductId)
                      .OnDelete(DeleteBehavior.Cascade);
            });

            // User configuration
            modelBuilder.Entity<User>(entity =>
            {
                entity.ToTable("User");
                entity.Property(e => e.Id).HasColumnName("id");
                entity.Property(e => e.Name).HasColumnName("name");
                entity.Property(e => e.Email).HasColumnName("email");
                entity.Property(e => e.PasswordHash).HasColumnName("password_hash"); 
                entity.Property(e => e.PhoneNumber).HasColumnName("phone_number");   
                // entity.Property(e => e.Address).HasColumnName("address");
                entity.Property(e => e.CreatedAt).HasColumnName("created_at");
                entity.Property(e => e.Role).HasColumnName("role");

                // Configure ENUM constraint
                entity.Property(e => e.Role)
                      .HasConversion<string>()
                      .HasMaxLength(20);
            });

            // Category configuration
            modelBuilder.Entity<Category_lv1>(entity =>
            {
                entity.ToTable("Category_lv1");
                entity.Property(e => e.Id).HasColumnName("id");
                entity.Property(e => e.Name).HasColumnName("name");
                entity.Property(e => e.Slug).HasColumnName("slug");
            });

            base.OnModelCreating(modelBuilder);
        }
    }